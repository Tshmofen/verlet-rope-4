[gd_scene load_steps=20 format=3 uid="uid://bota3ppynjsu1"]

[ext_resource type="Material" uid="uid://o7na8drc2je2" path="res://addons/verlet_rope_4/materials/rope_default.material" id="2_dar0o"]
[ext_resource type="Script" uid="uid://c3oxgehluk75x" path="res://addons/verlet_rope_4/Physics/VerletRopeSimulated.cs" id="2_lows4"]
[ext_resource type="Script" uid="uid://d36wx6t8jmjcx" path="res://demo/MovingRopeDemo.cs" id="2_vutyd"]
[ext_resource type="Script" uid="uid://chq4fc6dgmaln" path="res://addons/verlet_rope_4/Physics/Joints/VerletRopeJoint.cs" id="4_j5lb4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_3bmw0"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_buv6g"]
sky_material = SubResource("ProceduralSkyMaterial_3bmw0")

[sub_resource type="Environment" id="Environment_2p4hb"]
background_mode = 2
sky = SubResource("Sky_buv6g")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="BoxMesh" id="BoxMesh_dar0o"]
size = Vector3(20, 0.2, 20)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_j5lb4"]
albedo_color = Color(0.197937, 0.197937, 0.197937, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_u10mr"]
size = Vector3(20, 0.2, 20)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pbhg3"]
albedo_color = Color(0.529412, 0.12549, 0.133333, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_j5lb4"]
top_radius = 1.5
bottom_radius = 1.5
height = 3.0
radial_segments = 32

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dar0o"]
albedo_color = Color(0.513726, 0.0470588, 0.0470588, 1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_u10mr"]
height = 3.0
radius = 1.5

[sub_resource type="ImmediateMesh" id="ImmediateMesh_dar0o"]
resource_local_to_scene = true
metadata/verlet_rope_internal_stamp = 2203301526943

[sub_resource type="CylinderMesh" id="CylinderMesh_dar0o"]
height = 5.0
radial_segments = 32

[sub_resource type="CylinderShape3D" id="CylinderShape3D_j5lb4"]
height = 5.0

[sub_resource type="BoxMesh" id="BoxMesh_j5lb4"]
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_onu7k"]
size = Vector3(0.5, 0.5, 0.5)

[node name="Demo" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_2p4hb")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.991894, -0.0537, 0.11516, 0, 0.906308, 0.422618, -0.127065, -0.419193, 0.898962, 3.75437, 3, 8.8228)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.952619, -0.233005, 0.195514, 0.0514738, 0.757012, 0.651371, -0.299779, -0.610444, 0.733137, 0, 4, 0)
light_color = Color(0.976471, 0.956863, 0.976471, 1)
light_energy = 1.5
shadow_enabled = true

[node name="Ground" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ground"]
mesh = SubResource("BoxMesh_dar0o")
surface_material_override/0 = SubResource("StandardMaterial3D_j5lb4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
shape = SubResource("BoxShape3D_u10mr")

[node name="PillarRope" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.3697, 0, 1.81553)

[node name="Pillar" type="CSGBox3D" parent="PillarRope"]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 1.06294, 1.4665, -0.975477)
material_override = SubResource("StandardMaterial3D_pbhg3")
use_collision = true
size = Vector3(0.2, 3, 0.2)

[node name="PillarEnd" type="Node3D" parent="PillarRope/Pillar"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00181818, 1.48938, 0.097929)

[node name="Pillar2" type="CSGBox3D" parent="PillarRope"]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, -0.937059, 1.4665, 1.02452)
material_override = SubResource("StandardMaterial3D_pbhg3")
use_collision = true
size = Vector3(0.2, 3, 0.2)

[node name="PillarEnd" type="Node3D" parent="PillarRope/Pillar2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.102865, 1.48938, -0.00311756)

[node name="MovingRope" type="Node3D" parent="." node_paths=PackedStringArray("MovingNode")]
script = ExtResource("2_vutyd")
MovingNode = NodePath("MovingCylinder")
MovingPath = Vector3(7, 0, 0)
PathTime = 7.0
TransitionType = 7

[node name="MovingCylinder2" type="StaticBody3D" parent="MovingRope"]
transform = Transform3D(1, 0, 0, 0, 2.98023e-08, -1, 0, 1, 2.98023e-08, 2.91087, -0.692623, 5.47205)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="MovingRope/MovingCylinder2"]
mesh = SubResource("CylinderMesh_j5lb4")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_dar0o")

[node name="CollisionShape3D" type="CollisionShape3D" parent="MovingRope/MovingCylinder2"]
shape = SubResource("CylinderShape3D_u10mr")

[node name="VerletRope" type="MeshInstance3D" parent="MovingRope"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.09175, 2.54326, 5.46454)
material_override = ExtResource("2_dar0o")
mesh = SubResource("ImmediateMesh_dar0o")
script = ExtResource("2_lows4")
SimulationParticles = 20
RopeCollisionType = 2
RopeCollisionBehavior = 1
StaticCollisionMask = 3
DynamicCollisionMask = 2

[node name="VerletRopeJoint" type="Node3D" parent="MovingRope/VerletRope" node_paths=PackedStringArray("VerletRope", "StartBody", "EndBody")]
script = ExtResource("4_j5lb4")
VerletRope = NodePath("..")
StartBody = NodePath("../../MovingBoxStart")
IgnoreStartBodyCollision = true
EndBody = NodePath("../../MovingBoxEnd")
IgnoreEndBodyCollision = true
metadata/_custom_type_script = "uid://chq4fc6dgmaln"

[node name="MovingCylinder" type="RigidBody3D" parent="MovingRope"]
transform = Transform3D(1, 0, 0, 0, 2.98023e-08, -1, 0, 1, 2.98023e-08, -1.05123, 2.46518, 5.47205)
collision_layer = 2
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="MovingRope/MovingCylinder"]
mesh = SubResource("CylinderMesh_dar0o")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="MovingRope/MovingCylinder"]
shape = SubResource("CylinderShape3D_j5lb4")

[node name="MovingBoxEnd" type="RigidBody3D" parent="MovingRope"]
transform = Transform3D(1, 0, 0, 0, 2.98023e-08, -1, 0, 1, 2.98023e-08, 2.63301, 2.52539, 5.47205)
collision_layer = 2
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="MovingRope/MovingBoxEnd"]
mesh = SubResource("BoxMesh_j5lb4")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="MovingRope/MovingBoxEnd"]
shape = SubResource("BoxShape3D_onu7k")

[node name="MovingBoxStart" type="RigidBody3D" parent="MovingRope"]
transform = Transform3D(1, 0, 0, 0, 2.98023e-08, -1, 0, 1, 2.98023e-08, 0.356385, 2.82514, 5.47205)
collision_layer = 2
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="MovingRope/MovingBoxStart"]
mesh = SubResource("BoxMesh_j5lb4")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="MovingRope/MovingBoxStart"]
shape = SubResource("BoxShape3D_onu7k")
